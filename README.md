Plasma has default setting "Windows Can Cover" but this is not enough if you consider annoying panel appear when you move you mouse to her edge.   This script depend on "Windows Can Cover" option so it must be enabled.    I test this with virtual desktops but not with different displays so it could have some bugs. Also if you press meta key while in maximized window just press it one more time when you don't need it but if you don't do this it's okay because panel hides when new actions(maximized, minimized, removed, activated, etc) comes. 
